import { useCallback, useEffect, useState } from 'react';
import { useDropzone } from 'react-dropzone';

const PostEffects = () => {
  return (
    <div className='flex flex-col items-center justify-between w-full h-full col-span-5 '>
      {/* file area */}
      <PostFile />

      {/* filter btn */}
      <div className='flex gap-4 child:text-[12px] child:2xl:text-[1rem] child:p-[7px_15px] child:2xl:p-[10px_18px] child:3xl:p-[12px_30px] child:border-woro-blue text-woro-blue  child:border child:rounded-[32px]'>
        <div
          style={{
            background:
              'linear-gradient(91deg, rgba(255, 255, 255, 0.80) 8.9%, rgba(255, 255, 255, 0.70) 66.01%, rgba(255, 255, 255, 0.50) 95.33%)',
          }}
          className='flex gap-1'
        >
          <svg
            xmlns='http://www.w3.org/2000/svg'
            className='w-4 h-4 2xl:w-[21px] 2xl:h-[21px] '
            viewBox='0 0 21 21'
            fill='none'
          >
            <path
              d='M11.9311 4.05495C13.0784 4.05495 14.0085 3.12486 14.0085 1.97754H14.9673C14.9673 3.12486 15.8974 4.05495 17.0447 4.05495V5.01376C15.8974 5.01376 14.9673 5.94385 14.9673 7.09118H14.0085C14.0085 5.94385 13.0784 5.01376 11.9311 5.01376V4.05495ZM0.851562 9.64799C3.67575 9.64799 5.9652 7.35854 5.9652 4.53436H7.66974C7.66974 7.35854 9.9592 9.64799 12.7834 9.64799V11.3525C9.9592 11.3525 7.66974 13.642 7.66974 16.4662H5.9652C5.9652 13.642 3.67575 11.3525 0.851562 11.3525V9.64799ZM4.15498 10.5003C5.27245 11.1204 6.19738 12.0453 6.81747 13.1628C7.43756 12.0453 8.3625 11.1204 9.47997 10.5003C8.3625 9.88015 7.43756 8.95527 6.81747 7.83778C6.19738 8.95527 5.27245 9.88015 4.15498 10.5003ZM14.701 12.2048C14.701 13.7346 13.4609 14.9747 11.9311 14.9747V16.2531C13.4609 16.2531 14.701 17.4933 14.701 19.023H15.9794C15.9794 17.4933 17.2195 16.2531 18.7493 16.2531V14.9747C17.2195 14.9747 15.9794 13.7346 15.9794 12.2048H14.701Z'
              fill='url(#paint0_linear_2674_18212)'
            />
            <defs>
              <linearGradient
                id='paint0_linear_2674_18212'
                x1='0.851563'
                y1='1.97754'
                x2='20.0283'
                y2='3.56409'
                gradientUnits='userSpaceOnUse'
              >
                <stop stopColor='#7F1DFE' />
                <stop offset='1' stopColor='#FD5C5C' />
              </linearGradient>
            </defs>
          </svg>
          <span>Edit with AI</span>
        </div>

        <div
          style={{
            background:
              'linear-gradient(91deg, rgba(255, 255, 255, 0.80) 8.9%, rgba(255, 255, 255, 0.70) 66.01%, rgba(255, 255, 255, 0.50) 95.33%)',
          }}
          className='flex gap-1'
        >
          <svg
            xmlns='http://www.w3.org/2000/svg'
            className='w-4 h-4 2xl:w-[21px] 2xl:h-[21px] '
            viewBox='0 0 22 21'
            fill='none'
          >
            <path
              d='M7.02522 18.5857C4.23891 17.2564 2.24503 14.5553 1.93828 11.3515H0.660156C1.09472 16.6003 5.48295 20.7244 10.8426 20.7244C11.0385 20.7244 11.2175 20.7074 11.4049 20.6989L8.15849 17.4439L7.02522 18.5857ZM10.9278 0.274414C10.7318 0.274414 10.5528 0.291456 10.3654 0.308497L13.6118 3.55493L14.7451 2.42166C17.5314 3.74239 19.5253 6.4435 19.832 9.64733H21.1102C20.6756 4.3985 16.2874 0.274414 10.9278 0.274414ZM14.2935 12.2036H15.9977V7.09108C15.9977 6.14527 15.2308 5.38691 14.2935 5.38691H9.18099V7.09108H14.2935V12.2036ZM7.47682 13.9077V3.68275H5.77266V5.38691H4.06849V7.09108H5.77266V13.9077C5.77266 14.845 6.53101 15.6119 7.47682 15.6119H14.2935V17.3161H15.9977V15.6119H17.7018V13.9077H7.47682Z'
              fill='url(#paint0_linear_2650_21153)'
            />
            <defs>
              <linearGradient
                id='paint0_linear_2650_21153'
                x1='0.660156'
                y1='0.274414'
                x2='22.5854'
                y2='2.00198'
                gradientUnits='userSpaceOnUse'
              >
                <stop stopColor='#7F1DFE' />
                <stop offset='1' stopColor='#464BD3' />
              </linearGradient>
            </defs>
          </svg>
          <span>Crop</span>
        </div>

        <div
          style={{
            background:
              'linear-gradient(91deg, rgba(255, 255, 255, 0.80) 8.9%, rgba(255, 255, 255, 0.70) 66.01%, rgba(255, 255, 255, 0.50) 95.33%)',
          }}
          className='flex gap-1'
        >
          <svg
            xmlns='http://www.w3.org/2000/svg'
            className='w-4 h-4 2xl:w-[21px] 2xl:h-[21px] '
            viewBox='0 0 21 21'
            fill='none'
          >
            <g clipPath='url(#clip0_2650_21156)'>
              <path
                d='M16.5982 8.79564V16.4644H4.65197V4.53522H12.3207V2.83105H4.66901C3.73172 2.83105 2.96484 3.59793 2.96484 4.53522V16.4644C2.96484 17.4017 3.73172 18.1686 4.66901 18.1686H16.5982C17.5355 18.1686 18.3023 17.4017 18.3023 16.4644V8.79564H16.5982ZM14.0931 7.04035L14.894 8.79564L15.695 7.04035L17.4503 6.23939L15.695 5.43843L14.894 3.68314L14.0931 5.43843L12.3378 6.23939L14.0931 7.04035ZM10.6336 7.09147L9.56849 9.4347L7.22526 10.4998L9.56849 11.5649L10.6336 13.9081L11.6987 11.5649L14.0419 10.4998L11.6987 9.4347L10.6336 7.09147Z'
                fill='#573FE0'
              />
            </g>
            <defs>
              <clipPath id='clip0_2650_21156'>
                <rect
                  width='20.45'
                  height='20.45'
                  fill='white'
                  transform='translate(0.410156 0.274414)'
                />
              </clipPath>
            </defs>
          </svg>
          <span>Filters</span>
        </div>

        <div
          style={{
            background:
              'linear-gradient(91deg, rgba(255, 255, 255, 0.80) 8.9%, rgba(255, 255, 255, 0.70) 66.01%, rgba(255, 255, 255, 0.50) 95.33%)',
          }}
          className='flex gap-1'
        >
          <svg
            xmlns='http://www.w3.org/2000/svg'
            className='w-4 h-4 2xl:w-[21px] 2xl:h-[21px] '
            viewBox='0 0 21 21'
            fill='none'
          >
            <path
              d='M11.0101 12.5676V2.31934H9.95415V12.5676C9.21494 12.6996 8.55195 13.1036 8.09578 13.7C7.63962 14.2965 7.42335 15.0422 7.48959 15.7901C7.55584 16.5381 7.89978 17.2342 8.45367 17.7412C9.00756 18.2482 9.73124 18.5294 10.4821 18.5294C11.233 18.5294 11.9567 18.2482 12.5106 17.7412C13.0645 17.2342 13.4084 16.5381 13.4747 15.7901C13.5409 15.0422 13.3247 14.2965 12.8685 13.7C12.4123 13.1036 11.7493 12.6996 11.0101 12.5676ZM10.4821 17.4674C10.0968 17.4674 9.72013 17.3531 9.39973 17.139C9.07934 16.9249 8.82962 16.6206 8.68216 16.2646C8.5347 15.9086 8.49612 15.5169 8.5713 15.139C8.64647 14.7611 8.83203 14.4139 9.1045 14.1414C9.37697 13.869 9.72412 13.6834 10.102 13.6082C10.48 13.5331 10.8717 13.5716 11.2277 13.7191C11.5837 13.8666 11.888 14.1163 12.1021 14.4367C12.3162 14.7571 12.4304 15.1337 12.4304 15.5191C12.4304 15.7749 12.38 16.0283 12.2821 16.2646C12.1842 16.501 12.0407 16.7158 11.8598 16.8967C11.6789 17.0776 11.4641 17.2211 11.2277 17.319C10.9913 17.417 10.738 17.4674 10.4821 17.4674ZM8.20651 7.59923C8.20509 6.89506 7.95637 6.21376 7.50377 5.67431C7.05116 5.13485 6.42345 4.77152 5.73024 4.64777V2.31934H4.67426V4.64777C3.98225 4.77245 3.35605 5.13632 2.90508 5.6758C2.4541 6.21528 2.20703 6.89608 2.20703 7.59923C2.20703 8.30238 2.4541 8.98318 2.90508 9.52266C3.35605 10.0621 3.98225 10.426 4.67426 10.5507V18.159H5.73024V10.5507C6.42345 10.4269 7.05116 10.0636 7.50377 9.52415C7.95637 8.9847 8.20509 8.3034 8.20651 7.59923ZM5.20225 9.54751C4.81691 9.54751 4.44023 9.43325 4.11984 9.21917C3.79945 9.00509 3.54973 8.70081 3.40227 8.34481C3.25481 7.9888 3.21623 7.59707 3.2914 7.21914C3.36658 6.84121 3.55213 6.49406 3.82461 6.22159C4.09708 5.94912 4.44423 5.76356 4.82216 5.68839C5.20009 5.61321 5.59182 5.65179 5.94782 5.79925C6.30382 5.94671 6.6081 6.19643 6.82218 6.51682C7.03626 6.83722 7.15053 7.2139 7.15053 7.59923C7.15053 8.11595 6.94526 8.6115 6.57989 8.97687C6.21452 9.34225 5.71896 9.54751 5.20225 9.54751Z'
              fill='#5044DB'
            />
            <path
              d='M18.7643 10.2392C18.7629 9.53501 18.5142 8.85371 18.0616 8.31425C17.609 7.7748 16.9813 7.41147 16.2881 7.28772V2.31934H15.2321V7.29828C14.5369 7.41991 13.9069 7.78282 13.4529 8.32316C12.9989 8.86349 12.75 9.54663 12.75 10.2524C12.75 10.9581 12.9989 11.6413 13.4529 12.1816C13.9069 12.7219 14.5369 13.0848 15.2321 13.2065V18.159H16.2881V13.1906C16.9813 13.0669 17.609 12.7036 18.0616 12.1641C18.5142 11.6246 18.7629 10.9433 18.7643 10.2392ZM15.7601 12.1875C15.3748 12.1875 14.9981 12.0732 14.6777 11.8591C14.3573 11.645 14.1076 11.3408 13.9601 10.9848C13.8126 10.6287 13.7741 10.237 13.8492 9.85909C13.9244 9.48116 14.11 9.13401 14.3824 8.86153C14.6549 8.58906 15.0021 8.40351 15.38 8.32833C15.7579 8.25316 16.1497 8.29174 16.5057 8.4392C16.8617 8.58666 17.1659 8.83638 17.38 9.15677C17.5941 9.47716 17.7084 9.85384 17.7084 10.2392C17.7084 10.495 17.658 10.7484 17.5601 10.9848C17.4622 11.2211 17.3186 11.4359 17.1377 11.6168C16.9568 11.7977 16.742 11.9412 16.5057 12.0392C16.2693 12.1371 16.0159 12.1875 15.7601 12.1875Z'
              fill='#5044DB'
            />
          </svg>
          <span>Edit</span>
        </div>

        <div
          style={{
            background:
              'linear-gradient(91deg, rgba(255, 255, 255, 0.80) 8.9%, rgba(255, 255, 255, 0.70) 66.01%, rgba(255, 255, 255, 0.50) 95.33%)',
          }}
          className='flex gap-1'
        >
          <svg
            xmlns='http://www.w3.org/2000/svg'
            className='w-4 h-4 2xl:w-[21px] 2xl:h-[21px] '
            viewBox='0 0 22 21'
            fill='none'
          >
            <path
              d='M7.68729 10.5434L8.89258 11.7487L6.73125 13.909L17.9574 13.9097V15.6142L6.73125 15.6136L8.89258 17.7752L7.68729 18.9805L3.46875 14.7619L7.68729 10.5434ZM14.5912 2.02066L18.8097 6.23924L14.5912 10.4577L13.3858 9.25245L15.5472 7.09083L4.32102 7.09151V5.38696L15.5472 5.38628L13.3858 3.22594L14.5912 2.02066Z'
              fill='#7725F8'
            />
          </svg>
          <span>Change Photo</span>
        </div>
      </div>
    </div>
  );
};
export default PostEffects;

const PostFile = () => {
  const [paths, setPaths] = useState([]);

  const onDrop = useCallback(
    (acceptedFiles) => {
      setPaths(acceptedFiles.map((file) => URL.createObjectURL(file)));
    },
    [setPaths],
  );

  const { getRootProps, getInputProps, isDragActive } = useDropzone({
    onDrop,
    disabled: paths.length === 1,
  });

  // useEffect(() => {
  //   console.log('paths', paths);
  // }, [paths]);

  // useEffect(() => {
  //   console.log('isDragActive', isDragActive);
  // }, [isDragActive]);

  return (
    <div
      style={{
        background:
          ' linear-gradient(87deg, #FED170 0.02%, #E65351 29.18%, #C6338E 61.47%, #4F62D2 100%)',
      }}
      className='p-[2px] 2xl:p-[4px] rounded-[11px] shadow-[0px_5.3px_36.2px_6.7px_rgba(0,_0,_0,_0.15)]  mt-4 2xl:mt-8'
    >
      <div className='w-[220px] 2xl:w-[356px] h-[250px] 2xl:h-[374px] p-[16px_17px] 2xl:p-[26px_25px] border rounded-[11px] bg-white '>
        {/* file uploader */}
        <form className='w-full h-full'>
          <div
            {...getRootProps({
              className:
                'w-full flex flex-col gap-2 justify-center items-center h-full rounded-[10px] border border-dashed border-black bg-[#EAEAEA] cursor-pointer',
            })}
            title='Click to upload'
          >
            {!paths.length && (
              <>
                <div
                  style={{
                    background:
                      'linear-gradient(95deg, #7F1DFE 0%, #464BD3 100%)',
                  }}
                  className='flex items-center justify-center rounded-full w-7 h-7 2xl:w-11 2xl:h-11 '
                >
                  <svg
                    xmlns='http://www.w3.org/2000/svg'
                    className='w-3 h-3 2xl:w-4 2xl:h-4'
                    viewBox='0 0 17 17'
                    fill='none'
                  >
                    <path
                      d='M7.6846 7.85354V2.61816H9.42972V7.85354H14.6651V9.59867H9.42972V14.834H7.6846V9.59867H2.44922V7.85354H7.6846Z'
                      fill='white'
                    />
                  </svg>
                </div>
                <p className='max-w-[110px] text-center leading-tight'>
                  Drag & drop or{' '}
                  <span className='text-woro-blue'>select a file</span>
                </p>
                <input {...getInputProps()} />
              </>
            )}

            {paths.length !== 0 && (
              <img
                className='object-cover w-full h-full'
                src={paths[0]}
                alt='img'
              ></img>
            )}
          </div>
        </form>
      </div>
    </div>
  );
};
